CREATE TABLE user_types( id INTEGER NOT NULL, name VARCHAR(15) UNICODE NOT NULL, titles_no INTEGER NOT NULL, period VARCHAR(8) UNICODE, PRIMARY KEY (id))
CREATE TABLE users( id INTEGER NOT NULL, city VARCHAR(45) UNICODE NULL, zipcode INTEGER NULL, address VARCHAR(150) UNICODE NULL, sign_date DATE NULL, warning NUMBER(1) NOT NULL, phone VARCHAR(100) UNICODE NULL, email VARCHAR(30) UNICODE NULL, user_type INTEGER NOT NULL, PRIMARY KEY (id), FOREIGN KEY (user_type) REFERENCES USER_TYPES (id))
CREATE TABLE edu_lvl( id INTEGER NOT NULL, name VARCHAR(30) UNICODE NOT NULL, PRIMARY KEY (id))
CREATE TABLE user_categs( id INTEGER NOT NULL, name VARCHAR(30) UNICODE NOT NULL, titles_no INTEGER NOT NULL, period VARCHAR(8) UNICODE NULL, PRIMARY KEY (id))
CREATE TABLE mmbr_types( id INTEGER NOT NULL, name VARCHAR(100) UNICODE NOT NULL, titles_no INTEGER NOT NULL, period VARCHAR(8) UNICODE NULL, PRIMARY KEY (id) )
CREATE TABLE groups( inst_name VARCHAR(45) UNICODE NOT NULL, sec_address VARCHAR(45) UNICODE NULL, sec_city VARCHAR(30) UNICODE NULL, sec_zip INTEGER NULL, sec_phone VARCHAR(30) UNICODE NULL, fax VARCHAR(15) UNICODE NULL, telex VARCHAR(15) UNICODE NULL, cont_fname VARCHAR(30) UNICODE NULL, cont_lname VARCHAR(30) UNICODE NULL, cont_email VARCHAR(30) UNICODE NULL, user_id INTEGER NOT NULL, PRIMARY KEY (user_id), FOREIGN KEY (user_id) REFERENCES USERS (id) )
CREATE TABLE single( dob DATE NULL, first_name VARCHAR(30) UNICODE NOT NULL, permission NUMBER(1) NULL, last_name VARCHAR(30) UNICODE NOT NULL, occupation VARCHAR(30) UNICODE NULL, country VARCHAR(30) UNICODE NULL, password VARCHAR(8) UNICODE NULL, passport VARCHAR(15) UNICODE NULL, organization VARCHAR(150) UNICODE NULL, org_address VARCHAR(150) UNICODE NULL, org_city VARCHAR(30) UNICODE NULL, org_zip INTEGER NULL, org_phone VARCHAR(30) UNICODE NULL, temp_addr VARCHAR(150) UNICODE NULL, temp_city VARCHAR(100) UNICODE NULL, temp_zip INTEGER NULL, temp_phone VARCHAR(15) UNICODE NULL, index_no VARCHAR(15) UNICODE NULL, jmbg NUMBER(13) NULL, edu_lvl INTEGER NULL, user_ctgr INTEGER NOT NULL, mmbr_type INTEGER NOT NULL, grp_id INTEGER NULL, user_id INTEGER NOT NULL, parent_name VARCHAR(30) UNICODE, doc_id integer, doc_no VARCHAR(15) UNICODE, doc_city VARCHAR(30) UNICODE, title VARCHAR(30) UNICODE, note VARCHAR(200) UNICODE, interests VARCHAR(60) UNICODE, gender integer, language INTEGER NULL, age INTEGER NULL, PRIMARY KEY (user_id), FOREIGN KEY (edu_lvl) REFERENCES EDU_LVL (id), FOREIGN KEY (user_ctgr) REFERENCES USER_CATEGS (id), FOREIGN KEY (mmbr_type) REFERENCES MMBR_TYPES (id), FOREIGN KEY (grp_id) REFERENCES GROUPS (user_id), FOREIGN KEY (user_id) REFERENCES USERS (id), FOREIGN KEY (language) REFERENCES LANGUAGE (id))
CREATE TABLE institutions( inst_name VARCHAR(45) UNICODE NOT NULL, cont_fname VARCHAR(30) UNICODE NOT NULL, cont_lname VARCHAR(30) UNICODE NOT NULL, cont_email VARCHAR(30) UNICODE NULL, cont_phone VARCHAR(15) UNICODE NULL, sec_phone VARCHAR(15) UNICODE NULL, fax VARCHAR(15) UNICODE NULL, telex VARCHAR(15) UNICODE NULL, user_id INTEGER NOT NULL, PRIMARY KEY (user_id), FOREIGN KEY (user_id) REFERENCES USERS (id) )
CREATE TABLE membership( user_ctgr INTEGER NOT NULL, mmbr_type INTEGER NOT NULL, mdate DATE NOT NULL, cost NUMBER(8,2) NULL, hard_curr NUMBER(8,2) NULL, PRIMARY KEY (mdate, user_ctgr, mmbr_type), FOREIGN KEY (user_ctgr) REFERENCES USER_CATEGS (id), FOREIGN KEY (mmbr_type) REFERENCES MMBR_TYPES (id))
CREATE TABLE signing( single_id INTEGER NOT NULL, official_id INTEGER NOT NULL, sdate DATE NOT NULL, cost NUMBER(8,2) NULL, hard_curr NUMBER(8,2) NULL, PRIMARY KEY (sdate, official_id, single_id), FOREIGN KEY (single_id) REFERENCES SINGLE (user_id))
CREATE TABLE officials( id INTEGER NOT NULL, last_name VARCHAR(30) UNICODE NOT NULL, first_name VARCHAR(15) UNICODE NOT NULL, email VARCHAR(45) UNICODE NULL, PRIMARY KEY (id))
CREATE TABLE location( id INTEGER NOT NULL, name VARCHAR(100) UNICODE NOT NULL, PRIMARY KEY (id))
CREATE TABLE lend_types( id INTEGER NOT NULL, name VARCHAR(45) UNICODE NOT NULL, titles_no INTEGER NOT NULL, period VARCHAR(8) UNICODE NULL, PRIMARY KEY (id))
CREATE TABLE lending( ctlg_no VARCHAR(30) UNICODE NOT NULL, single_id INTEGER NOT NULL, lend_date DATE NOT NULL, return_date DATE NULL, resume_date DATE NULL, official_id INTEGER NOT NULL, lend_type INTEGER NOT NULL, location INTEGER NOT NULL, description VARCHAR(30) UNICODE NULL, PRIMARY KEY (lend_date, single_id, ctlg_no), FOREIGN KEY (single_id) REFERENCES SINGLE (user_id), FOREIGN KEY (lend_type) REFERENCES LEND_TYPES (id), FOREIGN KEY (location) REFERENCES LOCATION (id) )
CREATE TABLE circ_docs( sig VARCHAR(255) UNICODE NULL, ctlg_no VARCHAR(255) UNICODE NOT NULL, docid NUMBER(38) NOT NULL, status INTEGER NOT NULL, rcv_req_id INTEGER, type VARCHAR(10) UNICODE NULL, state CHAR(15) UNICODE NULL, PRIMARY KEY (ctlg_no) )
CREATE TABLE reservations( single_id INTEGER NOT NULL, ctlg_no VARCHAR(30) UNICODE NOT NULL, rsrv_date DATE NOT NULL, notification NUMBER(1) NOT NULL, resume_date DATE NULL, official_id INTEGER NOT NULL, PRIMARY KEY (rsrv_date, ctlg_no, single_id), FOREIGN KEY (single_id) REFERENCES SINGLE (user_id))
CREATE TABLE publications_reservations( ctlg_no VARCHAR(30) UNICODE NOT NULL, rsrv_date DATE NOT NULL, single_id INTEGER NOT NULL, pub_ctlg_no VARCHAR(30) UNICODE NOT NULL, PRIMARY KEY (ctlg_no, rsrv_date, single_id, pub_ctlg_no), FOREIGN KEY (rsrv_date, pub_ctlg_no, single_id) REFERENCES RESERVATIONS ( rsrv_date, ctlg_no, single_id))
CREATE TABLE self_rsrv( single_id INTEGER NOT NULL, ctlg_no VARCHAR(30) UNICODE NOT NULL, rsrv_date DATE NOT NULL, notification NUMBER(1) NOT NULL, resume_date DATE NULL, PRIMARY KEY (rsrv_date, ctlg_no, single_id), FOREIGN KEY (single_id) REFERENCES SINGLE (user_id))
CREATE TABLE lend_brw( id INTEGER NOT NULL, author VARCHAR(60) UNICODE NOT NULL, payment VARCHAR(15) UNICODE NOT NULL, title VARCHAR(60) UNICODE NOT NULL, cost NUMBER(8,2) NOT NULL, type VARCHAR(15) UNICODE NOT NULL, pieces_no INTEGER NULL, comments VARCHAR(60) UNICODE NULL, hard_curr NUMBER(8,2) NULL, PRIMARY KEY (id))
CREATE TABLE received_req( lendbrw_id INTEGER NOT NULL, accept_date DATE NOT NULL, institution VARCHAR(45) UNICODE NOT NULL, lend_date DATE NULL, return_date DATE NULL, inst_id INTEGER NOT NULL, PRIMARY KEY (lendbrw_id), FOREIGN KEY (inst_id) REFERENCES INSTITUTIONS (user_id), FOREIGN KEY (lendbrw_id) REFERENCES LEND_BRW(id))
CREATE TABLE sent_req( lendbrw_id INTEGER NOT NULL, send_date DATE NOT NULL, institution VARCHAR(45) UNICODE NOT NULL, accept_date DATE NULL, return_date DATE NULL, inst_id INTEGER NOT NULL, PRIMARY KEY (lendbrw_id), FOREIGN KEY (inst_id) REFERENCES INSTITUTIONS (user_id), FOREIGN KEY (lendbrw_id) REFERENCES LEND_BRW(id))
CREATE TABLE borrowed_pub( id INTEGER NOT NULL, catalogue_no VARCHAR(30) UNICODE NOT NULL, author VARCHAR(60) UNICODE NOT NULL, title VARCHAR(60) UNICODE NOT NULL, sent_req_id INTEGER NOT NULL, PRIMARY KEY (id), FOREIGN KEY (sent_req_id) REFERENCES SENT_REQ (lendbrw_id))
CREATE TABLE warning_types( id INTEGER NOT NULL, wtext VARCHAR(500) UNICODE NOT NULL, PRIMARY KEY (id))
CREATE TABLE warnings( warn_type INTEGER NOT NULL, user_id INTEGER NOT NULL, ctlg_no VARCHAR(30) UNICODE NOT NULL, wdate DATE NOT NULL, returned CHAR(1) UNICODE NOT NULL, PRIMARY KEY (warn_type, user_id, ctlg_no), FOREIGN KEY (warn_type) REFERENCES WARNING_TYPES (id), FOREIGN KEY (user_id) REFERENCES USERS (id))
CREATE INDEX USER_USTP_IDX ON USERS(user_type )
CREATE INDEX SNGL_USCT_IDX ON SINGLE( user_ctgr )
CREATE INDEX SNGL_GRP_IDX ON SINGLE(grp_id )
CREATE INDEX SNGL_EDU_IDX ON SINGLE(edu_lvl )
CREATE INDEX SNGL_MBTP_IDX ON SINGLE(mmbr_type )
CREATE INDEX SNRQ_INST_IDX ON SENT_REQ(inst_id)
CREATE INDEX BRPB_SNRQ_IDX ON BORROWED_PUB(sent_req_id)
CREATE INDEX PUBL_RSRV_PUBL_IDX ON PUBLICATIONS_RESERVATIONS(ctlg_no )
CREATE INDEX PUB_REZ_REZ_IDX ON PUBLICATIONS_RESERVATIONS( rsrv_date, single_id, pub_ctlg_no )
CREATE INDEX RCRQ_INST_IDX ON RECEIVED_REQ(inst_id)
CREATE INDEX RSRV_SNGL_IDX ON RESERVATIONS(single_id)
CREATE INDEX RSRV_PUBL_IDX ON RESERVATIONS(ctlg_no )
CREATE INDEX RSRV_OFCL_IDX ON RESERVATIONS(official_id )
CREATE INDEX SLFR_SNGL_IDX ON SELF_RSRV(single_id )
CREATE INDEX SLFR_PUBL_IDX ON SELF_RSRV(ctlg_no )
CREATE INDEX SIGN_SNGL_IDX ON SIGNING (single_id )
CREATE INDEX SIGN_OFCL_IDX ON SIGNING (official_id )
CREATE INDEX MMBR_USCT_IDX ON MEMBERSHIP(user_ctgr)
CREATE INDEX MMBR_MBTP_IDX ON MEMBERSHIP(mmbr_type)
CREATE INDEX LEND_SNGL_IDX ON LENDING(single_id )
CREATE INDEX LEND_PUBL_IDX ON LENDING(ctlg_no )
CREATE INDEX LEND_OFCL_IDX ON LENDING(official_id )
CREATE INDEX LEND_LNDT_IDX ON LENDING(lend_type ,location )
CREATE INDEX WARN_DATE_IDX ON WARNINGS(wdate)
CREATE INDEX CIRC_DOCS_IDX ON CIRC_DOCS(docid)
CREATE INDEX CIRC_DOCS_2 ON CIRC_DOCS(sig)
INSERT INTO user_types VALUES(1,'Individue',5,10)
INSERT INTO user_types VALUES(2,'Kolektivni',10,15)
INSERT INTO user_types VALUES(3,'Instit Razmene',30,30)
INSERT INTO user_categs VALUES(1,'Profesor',15,15)
INSERT INTO user_categs VALUES(2,'Student',15,15)
INSERT INTO user_categs VALUES(3,'Postdiplomac',15,15)
INSERT INTO user_categs VALUES(4,'Zaposlen',15,15)
INSERT INTO user_categs VALUES(5,'Penzioner',15,15)
INSERT INTO user_categs VALUES(6,'Radnik biblioteke',15,15)
INSERT INTO user_categs VALUES(7,'Po~asni ~lan',15,15)
INSERT INTO user_categs VALUES(8,'U~enik',15,15)
INSERT INTO users VALUES (0, ' ', 123, ' ', TRUNC(SYSDATE), 0, NULL, NULL, 1)
INSERT INTO edu_lvl VALUES(0,'      ')
INSERT INTO edu_lvl VALUES(1,'Osnovno')
INSERT INTO edu_lvl VALUES(2,'Srednje')
INSERT INTO edu_lvl VALUES(3,'Vi{e')
INSERT INTO edu_lvl VALUES(4,'Visoko')
INSERT INTO mmbr_types VALUES(1,'Redovan',5,15)
INSERT INTO mmbr_types VALUES(2,'Privremeni',5,15)
INSERT INTO mmbr_types VALUES(3,'Po~asni',5,15)
INSERT INTO location VALUES (1, '~itaonica A')
INSERT INTO location VALUES (2, '~itaonica B')
INSERT INTO lend_types VALUES (1, 'U ~itaonici', 5, 1)
INSERT INTO lend_types VALUES (2, 'Van ~itaonice', 5, 15)
INSERT INTO groups VALUES ('        ',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,0)
CREATE SEQUENCE MMBRIDSEQ START WITH 1 NOCACHE